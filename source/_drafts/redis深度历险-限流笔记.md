---
title: redis深度历险-限流笔记
comments: true
categories: 笔记
tags:
  - redis
  - 读书笔记
abbrlink: 8c6102ef
date: 2019-09-17 16:25:46
---
#### 前言
限流 应该是所有系统中都需要的一个重要的功能   
限流 限制流量 使用一定的策略 控制当前流量的大小 保证服务的稳定运行    
在高并发 高流量的情况下  限流就是其中一种核心处理手段   
通过限制流量 来避免压垮服务   
不过一般来说 限流和削峰应该是同时进行的 
例如 一般是用mq进行削峰处理  当mq未满之前  不进行前置限流 只做mq之后的限流  当mq满了之后 前置限流也需要加上  

#### 常用限流算法 
> 这里那http请求的流量来举例子

参考文档:  https://www.cnblogs.com/linjiqin/p/9707713.html  

* 计数   
 对每个接口进行访问计数  设置超时时间 当某个时间段内访问数量超过指定次数 拒绝服务   
 这个很简略 只适合做简单的限制  在边界情况下会出现无法限制的情况  
* 滑动窗口   
 跟滑动窗口算法不同 滑动窗口算法是用来处理一些查询计算优化的    
 滑动窗口限流方案 是利用窗口来计量窗口范围内访问次数来达到限流  避免由于直接计数边界异常      
* 漏桶算法   
  类似小学应用题中的  泳池 边进水 边放水 的套路   
  参考笔记: {% post_link 算法/漏桶算法笔记 %}
* 令牌桶算法   
  通过生成令牌 每次请求都尝试获取令牌进行访问  限制的速率跟令牌生成速度有关  
  参考笔记: {% post_link 算法/令牌桶算法 %} 
  
  
#### 实例 
##### 计数法 
设置请求的标识为name  值任意  超时时间为5s  如果本次访问存在这个name的key 那么拒绝访问     
###### redis指令
```bash
set name value ex 5  
```
##### 滑动窗口 
设置某个 name的 scope 为1ms 
###### redis指令 


##### 漏桶算法 


##### 令牌桶算法 




#### 总结 


  
  






